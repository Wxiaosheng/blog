### 栈空间和堆空间：数据是如何存储的？

#### JavaScript 是什么类型的语言
把这种在使用之前就需要确认其变量数据类型的称为**静态语言**，相反地，我们把在运行过程中需要检查数据类型的语言称为**动态语言**

支持隐式类型转换的语言称为**弱类型语言**，不支持隐式类型转换的语言称为**强类型语言**

**JavaScript 是一种弱类型的、动态的语言**  
* 弱类型，意味着你不需要告诉 JavaScript 引擎这个或那个变量是什么数据类型，JavaScript 引擎在运行代码的时候自己会计算出来
* 动态，意味着你可以使用同一个变量保存不同类型的数据

#### JavaScript 中的数据类型一种有 8 种
![JS数据类型](https://static001.geekbang.org/resource/image/85/15/85b87602eac65356c9171bbd023f5715.png)

注意：
1. 使用 typeof 检测 Null 类型时，返回的是 Object
2. Object 类型比较特殊
3. 我们把前面的 7 种数据类型称为原始类型，把最后一个对象类型称为引用类型，之所以把它们区分为两种不同的类型，是因为它们在内存中存放的位置不一样

#### 内存空间
在 JavaScript 的执行过程中， 主要有三种类型内存空间，分别是**代码空间**、**栈空间**和**堆空间**

* 代码空间，主要是存储可执行代码的
* 栈空间，即调用栈，是用来存储执行上下文的
  * 原始类型的数据值都是直接保存在“栈”中的，引用类型的值是存放在“堆”中的  
  * 通常情况下，栈空间都不会设置太大，主要用来存放一些原始类型的小数据

```javascript
function foo(){
    var a = "极客时间"
    var b = a
    var c = {name:"极客时间"}
    var d = c
}
foo()
```
![内存示意图](https://static001.geekbang.org/resource/image/51/f5/51127624a725a18a0e12e0f5a7aadbf5.png)


### 再谈闭包
产生闭包的核心有两步：
* 第一步是需要预扫描内部函数；
* 第二步是把内部函数引用的外部变量保存到堆中；

![闭包内存图](https://static001.geekbang.org/resource/image/f9/db/f9dd29ff5371c247e10546393c904edb.png)